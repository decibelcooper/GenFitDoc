<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GENFIT: genfit::ICalibrationParametersDerivatives Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GENFIT
   &#160;<span id="projectnumber">Rev:NoNumberAvailable</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegenfit.html">genfit</a></li><li class="navelem"><a class="el" href="classgenfit_1_1_i_calibration_parameters_derivatives.html">ICalibrationParametersDerivatives</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classgenfit_1_1_i_calibration_parameters_derivatives-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">genfit::ICalibrationParametersDerivatives Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Abstract base class to establish an interface between physical representation of the detector for alignment/calibration and (fitted) state on <a class="el" href="classgenfit_1_1_track.html" title="Collection of TrackPoint objects, AbsTrackRep objects and FitStatus objects. ">genfit::Track</a>.  
 <a href="classgenfit_1_1_i_calibration_parameters_derivatives.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_i_calibration_parameters_derivatives_8h_source.html">ICalibrationParametersDerivatives.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for genfit::ICalibrationParametersDerivatives:</div>
<div class="dyncontent">
<div class="center"><img src="classgenfit_1_1_i_calibration_parameters_derivatives__coll__graph.png" border="0" usemap="#genfit_1_1_i_calibration_parameters_derivatives_coll__map" alt="Collaboration graph"/></div>
<map name="genfit_1_1_i_calibration_parameters_derivatives_coll__map" id="genfit_1_1_i_calibration_parameters_derivatives_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9d4c39033d6d8bd96b353e1a876853c0"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgenfit_1_1_i_calibration_parameters_derivatives.html#a9d4c39033d6d8bd96b353e1a876853c0">~ICalibrationParametersDerivatives</a> ()</td></tr>
<tr class="separator:a9d4c39033d6d8bd96b353e1a876853c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad87ecb772d1fe523d7ac76cae3cfe87"><td class="memItemLeft" align="right" valign="top">virtual std::pair&lt; std::vector&lt; int &gt;, TMatrixD &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgenfit_1_1_i_calibration_parameters_derivatives.html#aad87ecb772d1fe523d7ac76cae3cfe87">globalDerivatives</a> (const <a class="el" href="classgenfit_1_1_state_on_plane.html">genfit::StateOnPlane</a> *sop)</td></tr>
<tr class="memdesc:aad87ecb772d1fe523d7ac76cae3cfe87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Labels and derivatives of residuals (local measurement coordinates) w.r.t. alignment/calibration parameters Matrix "G" of derivatives valid for given prediction of track state:  <a href="#aad87ecb772d1fe523d7ac76cae3cfe87">More...</a><br /></td></tr>
<tr class="separator:aad87ecb772d1fe523d7ac76cae3cfe87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac946d5419f26737935a18fbd31c517d5"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgenfit_1_1_i_calibration_parameters_derivatives.html#ac946d5419f26737935a18fbd31c517d5">labels</a> ()</td></tr>
<tr class="memdesc:ac946d5419f26737935a18fbd31c517d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of integer labels for calibration/alignment parameters available (must match #columns of derivatives(...))  <a href="#ac946d5419f26737935a18fbd31c517d5">More...</a><br /></td></tr>
<tr class="separator:ac946d5419f26737935a18fbd31c517d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6ce7b0f9fe0f7213fe4c173de46cabc"><td class="memItemLeft" align="right" valign="top">virtual TMatrixD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgenfit_1_1_i_calibration_parameters_derivatives.html#ae6ce7b0f9fe0f7213fe4c173de46cabc">derivatives</a> (const <a class="el" href="classgenfit_1_1_state_on_plane.html">genfit::StateOnPlane</a> *)</td></tr>
<tr class="memdesc:ae6ce7b0f9fe0f7213fe4c173de46cabc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Derivatives of residuals (local measurement coordinates) w.r.t. alignment/calibration parameters Matrix "G" of derivatives valid for given prediction of track state:  <a href="#ae6ce7b0f9fe0f7213fe4c173de46cabc">More...</a><br /></td></tr>
<tr class="separator:ae6ce7b0f9fe0f7213fe4c173de46cabc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6d988b75f9d2f66d6707281b6f950ab"><td class="memItemLeft" align="right" valign="top">virtual TMatrixD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgenfit_1_1_i_calibration_parameters_derivatives.html#aa6d988b75f9d2f66d6707281b6f950ab">localDerivatives</a> (const <a class="el" href="classgenfit_1_1_state_on_plane.html">genfit::StateOnPlane</a> *)</td></tr>
<tr class="memdesc:aa6d988b75f9d2f66d6707281b6f950ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Derivatives for additional local parameters to be fitted in global calibration algorithms together with with global parameters.  <a href="#aa6d988b75f9d2f66d6707281b6f950ab">More...</a><br /></td></tr>
<tr class="separator:aa6d988b75f9d2f66d6707281b6f950ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5829345b7187f37efdc67c501bc367e"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgenfit_1_1_i_calibration_parameters_derivatives.html#ac5829345b7187f37efdc67c501bc367e">localLabels</a> ()</td></tr>
<tr class="memdesc:ac5829345b7187f37efdc67c501bc367e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector of integer labels for local calibration parameters available (must match #columns of localDerivatives(...))  <a href="#ac5829345b7187f37efdc67c501bc367e">More...</a><br /></td></tr>
<tr class="separator:ac5829345b7187f37efdc67c501bc367e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Abstract base class to establish an interface between physical representation of the detector for alignment/calibration and (fitted) state on <a class="el" href="classgenfit_1_1_track.html" title="Collection of TrackPoint objects, AbsTrackRep objects and FitStatus objects. ">genfit::Track</a>. </p>
<p>An implementing class (RecoHit) should be able to calculate derivatives of track fit residuals (2D for planar, 1D for strip hit) residuals w.r.t. global (and optionally additional local) parameters. Global parameters need unique integer labels to identify them across all sub-detectors</p>
<dl class="section author"><dt>Author</dt><dd>TadeasBilka </dd></dl>

<p class="definition">Definition at line <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html#l00044">44</a> of file <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html">ICalibrationParametersDerivatives.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9d4c39033d6d8bd96b353e1a876853c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d4c39033d6d8bd96b353e1a876853c0">&#9670;&nbsp;</a></span>~ICalibrationParametersDerivatives()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual genfit::ICalibrationParametersDerivatives::~ICalibrationParametersDerivatives </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html#l00047">47</a> of file <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html">ICalibrationParametersDerivatives.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae6ce7b0f9fe0f7213fe4c173de46cabc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6ce7b0f9fe0f7213fe4c173de46cabc">&#9670;&nbsp;</a></span>derivatives()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual TMatrixD genfit::ICalibrationParametersDerivatives::derivatives </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgenfit_1_1_state_on_plane.html">genfit::StateOnPlane</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Derivatives of residuals (local measurement coordinates) w.r.t. alignment/calibration parameters Matrix "G" of derivatives valid for given prediction of track state: </p>
<p>G(i, j) = d_residual_i/d_parameter_j</p>
<p>For 2D measurement (u,v):</p>
<p>G = ( du/da du/db du/dc ... ) ( dv/da dv/db dv/dc ... )</p>
<p>for calibration parameters a, b, c.</p>
<p>For 1D measurement both forms are allowed:</p>
<p>G = ( 0 0 0 ... ) ( dv/da dv/db dv/dc ... ) for V-strip,</p>
<p>G = ( du/da du/db du/dc ... ) ( 0 0 0 ... ) for U-strip,</p>
<p>or :</p>
<p>G = ( d_sensitive/da d_sensitive/db d_sensitive/dc ... ) as matrix with one row.</p>
<p>A possible algorithm using these derivatives should be able to resolve this based on the measurement HMatrix. Measurements with more dimesions (slopes, curvature) should provide full 4-5Dx(n params) matrix (state as (q/p, u', v', u, v) or (u', v', u, v))</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sop</td><td>Predicted state of the track as linearization point around which derivatives of alignment/calibration parameters shall be computed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TMatrixD Matrix with #rows = dimension of residual, #columns = number of parameters. #columns must match <a class="el" href="classgenfit_1_1_i_calibration_parameters_derivatives.html#ac946d5419f26737935a18fbd31c517d5" title="Vector of integer labels for calibration/alignment parameters available (must match #columns of deriv...">labels()</a>.size(). </dd></dl>

<p class="definition">Definition at line <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html#l00129">129</a> of file <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html">ICalibrationParametersDerivatives.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html#l00080">globalDerivatives()</a>.</p>

</div>
</div>
<a id="aad87ecb772d1fe523d7ac76cae3cfe87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad87ecb772d1fe523d7ac76cae3cfe87">&#9670;&nbsp;</a></span>globalDerivatives()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::pair&lt;std::vector&lt;int&gt;, TMatrixD&gt; genfit::ICalibrationParametersDerivatives::globalDerivatives </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgenfit_1_1_state_on_plane.html">genfit::StateOnPlane</a> *&#160;</td>
          <td class="paramname"><em>sop</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Labels and derivatives of residuals (local measurement coordinates) w.r.t. alignment/calibration parameters Matrix "G" of derivatives valid for given prediction of track state: </p>
<p>G(i, j) = d_residual_i/d_parameter_j</p>
<p>For 2D measurement (u,v):</p>
<p>G = ( du/da du/db du/dc ... ) ( dv/da dv/db dv/dc ... )</p>
<p>for calibration parameters a, b, c.</p>
<p>For 1D measurement:</p>
<p>G = ( 0 0 0 ... ) ( dv/da dv/db dv/dc ... ) for V-strip,</p>
<p>G = ( du/da du/db du/dc ... ) ( 0 0 0 ... ) for U-strip,</p>
<p>Measurements with more dimesions (slopes, curvature) should provide full 4-5Dx(n params) matrix (state as (q/p, u', v', u, v) or (u', v', u, v))</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sop</td><td>Predicted state of the track as linearization point around which derivatives of alignment/calibration parameters shall be computed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pair&lt;vector&lt;int&gt;, TMatrixD&gt; With matrix with #rows = dimension of residual, #columns = number of parameters. #columns must match vector&lt;int&gt;.size(). </dd></dl>

<p class="definition">Definition at line <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html#l00080">80</a> of file <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html">ICalibrationParametersDerivatives.h</a>.</p>

<p class="reference">References <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html#l00129">derivatives()</a>, and <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html#l00090">labels()</a>.</p>

<p class="reference">Referenced by <a class="el" href="_gbl_fitter_info_8cc_source.html#l00111">genfit::GblFitterInfo::constructGblPoint()</a>.</p>

</div>
</div>
<a id="ac946d5419f26737935a18fbd31c517d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac946d5419f26737935a18fbd31c517d5">&#9670;&nbsp;</a></span>labels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::vector&lt;int&gt; genfit::ICalibrationParametersDerivatives::labels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector of integer labels for calibration/alignment parameters available (must match #columns of derivatives(...)) </p>
<p>unique across all sub-detectors in calibration</p>
<dl class="section return"><dt>Returns</dt><dd>std::vector&lt; int &gt; Vector of integer labels </dd></dl>

<p class="definition">Definition at line <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html#l00090">90</a> of file <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html">ICalibrationParametersDerivatives.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html#l00080">globalDerivatives()</a>.</p>

</div>
</div>
<a id="aa6d988b75f9d2f66d6707281b6f950ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6d988b75f9d2f66d6707281b6f950ab">&#9670;&nbsp;</a></span>localDerivatives()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual TMatrixD genfit::ICalibrationParametersDerivatives::localDerivatives </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgenfit_1_1_state_on_plane.html">genfit::StateOnPlane</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Derivatives for additional local parameters to be fitted in global calibration algorithms together with with global parameters. </p>
<p>Local parameters are not neccesarily identified by label because their number is proportional to number of measurements included in calibration (possibly very huge number!)</p>
<dl class="section return"><dt>Returns</dt><dd>TMatrixD Matrix in form d_residual_i/d_parameter_j </dd></dl>

<p class="definition">Definition at line <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html#l00141">141</a> of file <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html">ICalibrationParametersDerivatives.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="_gbl_fitter_info_8cc_source.html#l00111">genfit::GblFitterInfo::constructGblPoint()</a>.</p>

</div>
</div>
<a id="ac5829345b7187f37efdc67c501bc367e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5829345b7187f37efdc67c501bc367e">&#9670;&nbsp;</a></span>localLabels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::vector&lt;int&gt; genfit::ICalibrationParametersDerivatives::localLabels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector of integer labels for local calibration parameters available (must match #columns of localDerivatives(...)) </p>
<p>This will be usually ignored (e.g. does not have to match localDerivatives), but it is a good practice to return vector of zeros of correct size </p><dl class="section return"><dt>Returns</dt><dd>std::vector&lt; int &gt; Vector of integer labels </dd></dl>

<p class="definition">Definition at line <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html#l00151">151</a> of file <a class="el" href="_i_calibration_parameters_derivatives_8h_source.html">ICalibrationParametersDerivatives.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/eicuser/GenFit/GBL/include/<a class="el" href="_i_calibration_parameters_derivatives_8h_source.html">ICalibrationParametersDerivatives.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 20 2018 18:25:50 for GENFIT by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
